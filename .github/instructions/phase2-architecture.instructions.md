---
applyTo: "**/*"
---

# Phase 2: Architecture Design（アーキテクチャ設計フェーズ）専用指示

このフェーズでは、**システム構造の設計とADR記録**が中心です。

## スキップ可能なケース

- 既存パターンに完全に従う場合
- 1ファイル以内の小さな修正
- ドキュメントやスタイルのみの変更

## 必須アクション

1. **ファイル配置設計**
   - ディレクトリ構造を決定
   - 命名規則の一貫性を確保
   - 既存の構造パターンに従う

2. **状態管理アプローチ**
   - どこでどのように状態を管理するか定義
   - React Context、props drilling、外部ライブラリの選択
   - 決定理由をADRに記録

3. **コンポーネント階層設計**
   - コンポーネントの責務を明確化
   - データフローを設計（props/context/イベント）
   - Presenterパターンなど確立されたパターンを適用

4. **ADR記録**
   - 重要な決定は必ずADRとして文書化
   - `docs/adr/`に構造化形式で保存
   - 既存ADRとの整合性を確認

## 出力フォーマット

設計結果は以下の構造で提示してください：

```markdown
## アーキテクチャ設計サマリー

### ファイル構成
- 追加/変更ファイル: [リスト]
- ディレクトリ構造: [説明]

### 状態管理
- アプローチ: [選択した手法]
- 理由: [なぜこの手法か]

### コンポーネント設計
- 主要コンポーネント: [リスト]
- データフロー: [図または説明]

### ADR
- 記録すべき決定: [リスト]
- ADR番号: [採番]
```

## 注意事項

- 過度に複雑な設計を避ける（YAGNI原則）
- 既存のプロジェクトパターンを尊重する
- 設計の変更は必ずADRで追跡する
